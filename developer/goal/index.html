



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Documentation for Atomist - How Teams Deliver Software">
      
      
      
        <meta name="author" content="The Atomist Team">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.0.4">
    
    
      
        <title>Create Goals - Atomist Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/fix-mime-type-application.451f80e5.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/fix-mime-type-application-palette.22915126.css">
      
      
        
        
        <meta name="theme-color" content="">
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/fix-mime-type-material-icons.css">
    
      <link rel="stylesheet" href="../../stylesheets/fix-mime-type-extra.css">
    
    
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MZ8NMFS');</script>
    <!-- End Google Tag Manager -->
<link rel="stylesheet" href="https://use.typekit.net/viv5qyy.css">

  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="white" data-md-color-accent="teal">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="../../#create-goals" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
<!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MZ8NMFS"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
  <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="Atomist Documentation" class="md-header-nav__button md-logo">
          <img src="../../img/atomist-developer-docs-logo.png" alt="Atomist Developer Docs">
        </a>
      </div>

      <div class="md-flex__cell md-flex__cell--stretch visit-main-site">
        <a href="https://www.atomist.com" target="_blank">Visit Atomist.com &raquo;</a>
      </div>
    </div>
  </nav>
  <div class="title-and-search-bar">
    <div class="md-grid">
      <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--stretch">
          <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
            
            
            <span class="md-header-nav__topic">
              Atomist Documentation
            </span>
            <span class="md-header-nav__topic">
              Create Goals
            </span>
            
            
          </div>
        </div>
        <div class="md-flex__cell md-flex__cell--shrink">
          
          
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
          
        </div>
      </div>
    </div>
  </div>
</header>

    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <!-- Main navigation -->
<nav class="md-nav md-nav--primary" data-md-level="0">

  <!-- Site title -->
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    Choose Section
  </label>

  <!-- Repository containing source -->
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/atomist/docs/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  

  <!-- Render item list -->
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Using Atomist
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Using Atomist
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../user/" title="Getting Started" class="md-nav__link">
      Getting Started
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user/dashboard/" title="Atomist web interface" class="md-nav__link">
      Atomist web interface
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user/github/" title="Source Control" class="md-nav__link">
      Source Control
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user/slack/" title="Slack" class="md-nav__link">
      Slack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user/lifecycle/" title="Built-in Chat Integrations" class="md-nav__link">
      Built-in Chat Integrations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user/integrations/" title="Supported Integrations" class="md-nav__link">
      Supported Integrations
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../quick-start/" title="Developer Quick Start" class="md-nav__link">
      Developer Quick Start
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      Developer Guide
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Developer Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../" title="What you can do" class="md-nav__link">
      What you can do
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../architecture/" title="Architecture" class="md-nav__link">
      Architecture
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3" type="checkbox" id="nav-4-3">
    
    <label class="md-nav__link" for="nav-4-3">
      Running an SDM
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-3">
        Running an SDM
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../sdm/" title="About the SDM" class="md-nav__link">
      About the SDM
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../prerequisites/" title="Prerequisites" class="md-nav__link">
      Prerequisites
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../team/" title="Team Mode" class="md-nav__link">
      Team Mode
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../local/" title="Local Mode" class="md-nav__link">
      Local Mode
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sdm-deploy/" title="Deploying your SDM" class="md-nav__link">
      Deploying your SDM
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sdm-debug/" title="Debugging an SDM" class="md-nav__link">
      Debugging an SDM
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-4" type="checkbox" id="nav-4-4" checked>
    
    <label class="md-nav__link" for="nav-4-4">
      Goals
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-4">
        Goals
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Create Goals
      </label>
    
    <a href="./" title="Create Goals" class="md-nav__link md-nav__link--active">
      Create Goals
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#create-goals" title="Create goals" class="md-nav__link">
    Create goals
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-a-goal" title="Creating a goal" class="md-nav__link">
    Creating a goal
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-the-goal-function" title="Using the goal function" class="md-nav__link">
    Using the goal function
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#waiting-on-a-precondition" title="Waiting on a Precondition" class="md-nav__link">
    Waiting on a Precondition
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#built-in-goals" title="Built-in Goals" class="md-nav__link">
    Built-in Goals
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#autoinspect" title="AutoInspect" class="md-nav__link">
    AutoInspect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#autofix" title="Autofix" class="md-nav__link">
    Autofix
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pushimpact" title="PushImpact" class="md-nav__link">
    PushImpact
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build" title="Build" class="md-nav__link">
    Build
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../set-goals/" title="Setting Goals" class="md-nav__link">
      Setting Goals
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../goals-more/" title="Doing More with Goals" class="md-nav__link">
      Doing More with Goals
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../event/" title="Event Listeners" class="md-nav__link">
      Event Listeners
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-6" type="checkbox" id="nav-4-6">
    
    <label class="md-nav__link" for="nav-4-6">
      Builds
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-6">
        Builds
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../build/" title="Build Goal" class="md-nav__link">
      Build Goal
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user/ci/" title="Integrations" class="md-nav__link">
      Integrations
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../deploy/" title="Deploys" class="md-nav__link">
      Deploys
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../inspect/" title="Code Inspections" class="md-nav__link">
      Code Inspections
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-9" type="checkbox" id="nav-4-9">
    
    <label class="md-nav__link" for="nav-4-9">
      Code Transforms
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-9">
        Code Transforms
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../transform/" title="Transforms" class="md-nav__link">
      Transforms
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../autofix/" title="Autofixes" class="md-nav__link">
      Autofixes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../project/" title="Project" class="md-nav__link">
      Project
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/" title="Commands" class="md-nav__link">
      Commands
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../create/" title="Project Generators" class="md-nav__link">
      Project Generators
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../fingerprint/" title="Fingerprints" class="md-nav__link">
      Fingerprints
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-13" type="checkbox" id="nav-4-13">
    
    <label class="md-nav__link" for="nav-4-13">
      Advanced
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-13">
        Advanced
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../sdm-concepts/" title="SDM Concepts" class="md-nav__link">
      SDM Concepts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../config/" title="SDM Configuration" class="md-nav__link">
      SDM Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spawn/" title="Running External Commands" class="md-nav__link">
      Running External Commands
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../logging/" title="Logging" class="md-nav__link">
      Logging
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../push-test/" title="Push Tests" class="md-nav__link">
      Push Tests
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../reporef/" title="RepoRef" class="md-nav__link">
      RepoRef
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spawn-builder/" title="Generic Builder" class="md-nav__link">
      Generic Builder
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../http/" title="HTTP Calls in an SDM" class="md-nav__link">
      HTTP Calls in an SDM
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../graphql/" title="Custom GraphQL Queries" class="md-nav__link">
      Custom GraphQL Queries
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../pxe/" title="Path Expressions" class="md-nav__link">
      Path Expressions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../slack/" title="Chat Messages" class="md-nav__link">
      Chat Messages
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/" title="Command Line Interface" class="md-nav__link">
      Command Line Interface
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../security/" title="Security Model" class="md-nav__link">
      Security Model
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../glossary/" title="Glossary" class="md-nav__link">
      Glossary
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../typescript/" title="TypeScript Hints" class="md-nav__link">
      TypeScript Hints
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../troubleshoot/" title="Troubleshooting" class="md-nav__link">
      Troubleshooting
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Extensions
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Extensions
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../pack/" title="Extension Packs" class="md-nav__link">
      Extension Packs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../pack/build/" title="Build" class="md-nav__link">
      Build
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../pack/changelog/" title="Changelog" class="md-nav__link">
      Changelog
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../pack/checkstyle/" title="Checkstyle" class="md-nav__link">
      Checkstyle
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../pack/pcf/" title="Cloud Foundry" class="md-nav__link">
      Cloud Foundry
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../pack/docker/" title="Docker" class="md-nav__link">
      Docker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../pack/kubernetes/" title="Kubernetes" class="md-nav__link">
      Kubernetes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../pack/issue/" title="Issue" class="md-nav__link">
      Issue
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../pack/sloc/" title="Lines of Code" class="md-nav__link">
      Lines of Code
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../pack/markdown/" title="Markdown" class="md-nav__link">
      Markdown
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../pack/node/" title="Node" class="md-nav__link">
      Node
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../pack/sonarqube/" title="Sonarqube" class="md-nav__link">
      Sonarqube
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../pack/spring/" title="Spring" class="md-nav__link">
      Spring
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      API Reference
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        API Reference
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="https://atomist.github.io/automation-client/" title="automation-client" class="md-nav__link">
      automation-client
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="https://atomist.github.io/sdm/" title="sdm" class="md-nav__link">
      sdm
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="https://atomist.github.io/sdm-pack-build/" title="sdm-pack-build" class="md-nav__link">
      sdm-pack-build
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="https://atomist.github.io/sdm-pack-checkstyle/" title="sdm-pack-checkstyle" class="md-nav__link">
      sdm-pack-checkstyle
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="https://atomist.github.io/sdm-pack-cloudfoundry/" title="sdm-pack-cloudfoundry" class="md-nav__link">
      sdm-pack-cloudfoundry
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="https://atomist.github.io/sdm-pack-k8s/" title="sdm-pack-k8s" class="md-nav__link">
      sdm-pack-k8s
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="https://atomist.github.io/sdm-pack-sloc/" title="sdm-pack-sloc" class="md-nav__link">
      sdm-pack-sloc
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="https://atomist.github.io/sdm-pack-spring/" title="sdm-pack-spring" class="md-nav__link">
      sdm-pack-spring
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="https://atomist.github.io/sdm-pack-sonarqube/" title="sdm-pack-sonarqube" class="md-nav__link">
      sdm-pack-sonarqube
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../support/" title="Support" class="md-nav__link">
      Support
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#create-goals" title="Create goals" class="md-nav__link">
    Create goals
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-a-goal" title="Creating a goal" class="md-nav__link">
    Creating a goal
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-the-goal-function" title="Using the goal function" class="md-nav__link">
    Using the goal function
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#waiting-on-a-precondition" title="Waiting on a Precondition" class="md-nav__link">
    Waiting on a Precondition
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#built-in-goals" title="Built-in Goals" class="md-nav__link">
    Built-in Goals
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#autoinspect" title="AutoInspect" class="md-nav__link">
    AutoInspect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#autofix" title="Autofix" class="md-nav__link">
    Autofix
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pushimpact" title="PushImpact" class="md-nav__link">
    PushImpact
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build" title="Build" class="md-nav__link">
    Build
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/atomist/docs/edit/master/docs/developer/goal.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                  <h1>Create Goals</h1>
                
                <p>Goals are reusable parts of functionality used within a CI/CD context. Think of tasks like starting a build, deploying your application to Kubernetes. These goals consist primarily of:</p>
<ul>
<li>something to identify the goal by, i.e. a unique name</li>
<li>a block of code to be executed when the task needs to be run</li>
<li>metadata to describe the goal and when it is applicable.</li>
</ul>
<p>The most important SDM functionality relates to what
happens on a push to a repository. An SDM allows you to process a push
in any way you choose, but typically you want it to initiate a
delivery flow. In short, an SDM allows you to set <strong>goals</strong> on as a response to 
an event, for example a push. </p>
<p>Goals can be completed by an SDM or elsewhere; for example, the SDM can recognize that a goal
is complete when a build finishes in an external system.</p>
<p>The goals set on a push don&rsquo;t need to be the same every time. Unlike
the static pipelines you may be used to, with Atomist the delivery flow is not necessarily the same
for every change. In essense, Atomist allows you to create a pipeline per push.</p>
<p>Goals aren&rsquo;t configured per repository. They are chosen dynamically, in response to any
push in any repository, based on the code and the context. What kind of project is it?
What branch was pushed? Is there a pull request? Which files changed? Brand-new repositories
require no configuration.</p>
<p>Goals are not necessarily sequential&ndash;by default they execute
in parallel&ndash;but certain goals, such as deployment, have preconditions
(goals that must have previously completed successfully).</p>
<p>In Slack, a push notification with several goals looks like this:</p>
<p><img alt="Push Notification With Goals" src="../img/push-notification-with-goals.png" /></p>
<p>This page shows how to</p>
<ul>
<li>create goals</li>
<li>teach them what to do</li>
<li>require approval</li>
</ul>
<p>The next page describes how to <a href="../set-goals/" title="Setting Goals in an SDM">set goals for each push</a>.</p>
<h2 id="create-goals">Create goals</h2>
<p>Set up goals wherever you configure your SDM, probably in <code>lib/machine/machine.ts</code>. This example comes
from <a href="https://github.com/atomist-seeds/spring-sdm/blob/master/lib/machine/machine.ts">an SDM for Java Spring Boot web services</a>.</p>
<p>A <a href="https://atomist.github.io/sdm/classes/_lib_api_goal_goal_.goal.html" title="API docs for Goal">Goal</a> object supplies its name, descriptions for its various possible states, and an implementation.</p>
<p>To experiment, you might want to</p>
<ul>
<li><a href="#creating-a-goal">create your own goal</a></li>
</ul>
<p>Or explore the built-in goal implementations:</p>
<ul>
<li><a href="../build/">Build</a> - run a build, with an existing integration or your own function</li>
<li><a href="#autofix">Autofix</a> - apply formatting changes, <a href="../../pack/changelog/">CHANGELOG</a> updates, etc. as automatic commits</li>
<li><a href="#autoinspect">AutoInspect</a> - inspect the new code</li>
<li><a href="#pushimpact">PushImpact</a> - run any other function as a response to the push</li>
<li><a href="../fingerprint/">Fingerprint</a> - compute a snapshot of some aspect of the code, for tracking</li>
</ul>
<p>After you&rsquo;ve created some goals, <a href="../set-goals/" title="Setting Goals in an SDM">choose when to set them</a>.</p>
<h2 id="creating-a-goal">Creating a goal</h2>
<p>You can define your own goal to extend Atomist&rsquo;s out of the box capabilities. For example, you can:</p>
<ul>
<li>Delegate to a CLI by spawning a process and waiting for its result</li>
<li>Call the API of a third party service</li>
<li>Use a Node module or Atomist&rsquo;s API to implement your functionality right in TypeScript</li>
</ul>
<p>To define your own goal, you must provide a name and description and a function for how to execute it.</p>
<h3 id="using-the-goal-function">Using the <code>goal</code> function</h3>
<p>Use the <code>goal</code> function from @atomist/sdm; pass it an object with a <code>displayName</code> and as many properties out of <a href="https://atomist.github.io/sdm/interfaces/_lib_api_goal_goal_.goaldefinition.html" title="GoalDefinition API Doc">GoalDefinition</a> as you choose.
Also pass a function to call when it&rsquo;s time to execute the goal. That function can return void or an <a href="https://atomist.github.io/sdm/interfaces/_lib_api_goal_executegoalresult_.executegoalresult.html" title="ExecuteGoalResult API Doc">ExecuteGoalResult</a>.</p>
<p>For example:</p>
<div class="codehilite"><pre><span></span><span class="kr">const</span> <span class="nx">releaseDocs</span> <span class="o">=</span> <span class="nx">goal</span><span class="p">(</span>
    <span class="p">{</span> <span class="nx">displayName</span><span class="o">:</span> <span class="s2">&quot;My new goal&quot;</span><span class="p">},</span> 
    <span class="nx">async</span> <span class="p">(</span><span class="nx">inv</span>: <span class="kt">GoalInvocation</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="c1">// do what is needed</span>
        <span class="k">return</span> <span class="p">{</span> <span class="nx">code</span>: <span class="kt">0</span> <span class="p">};</span>
    <span class="p">});</span>
</pre></div>


<h3 id="waiting-on-a-precondition">Waiting on a Precondition</h3>
<p>Sometimes goals need other goals to have completed before they can start. This is handled while <a href="../set-goals/">setting goals</a> on a push.</p>
<p>Sometimes they wait on external conditions, such as another service having started. This is handled with <em>wait rules</em>.</p>
<h2 id="built-in-goals">Built-in Goals</h2>
<p>A goal object has some identifying information, code to fulfill the goal, and optional preconditions (goals that need to complete before it can start). Some common goals have their own constructors. Atomist provides a couple of out of the box goal implementations for common CI tasks to be executed within a pipeline.</p>
<h3 id="autoinspect">AutoInspect</h3>
<p>Run an inspection on the code; if the code doesn&rsquo;t pass, you can fail the goals or require approval (a button push). To use it, you&rsquo;ll need to create one, set it on each push, and register inspections on it.</p>
<p>Instantiate an empty one:</p>
<div class="codehilite"><pre><span></span><span class="kr">export</span> <span class="kr">const</span> <span class="nx">codeInspection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AutoCodeInspection</span><span class="p">();</span>
</pre></div>


<p>And set it when you want it to run on a push. Here&rsquo;s the shortest way to run this goal on every push:</p>
<div class="codehilite"><pre><span></span>    <span class="nx">sdm</span><span class="p">.</span><span class="nx">addGoalContributions</span><span class="p">(</span><span class="nx">goalContributors</span><span class="p">(</span>
        <span class="nx">onAnyPush</span><span class="p">().</span><span class="nx">setGoals</span><span class="p">(</span><span class="nx">goals</span><span class="p">(</span><span class="s2">&quot;Inspections&quot;</span><span class="p">).</span><span class="nx">plan</span><span class="p">(</span><span class="nx">codeInspection</span><span class="p">))))</span>
</pre></div>


<p>Now the fun part: register inspections on it. Check the <a href="../inspect/" title="Automatic Code Inspections">Inspections</a> page for more on how to write inspections.
Once you have an <a href="https://atomist.github.io/sdm/interfaces/_lib_api_registration_autoinspectregistration_.autoinspectregistration.html" title="AutoInspectRegistration API Doc">AutoInspectRegistration</a>, register it on your goal:</p>
<div class="codehilite"><pre><span></span><span class="nx">codeInspection</span><span class="p">.</span><span class="kd">with</span><span class="p">(</span><span class="nx">MyAutoInspectRegistration</span><span class="p">)</span>
    <span class="p">.</span><span class="kd">with</span><span class="p">(</span><span class="nx">AnotherInspectRegistration</span><span class="p">);</span>
</pre></div>


<p>You can register any number of inspections. You can call <code>with</code> on the goal at any point in SDM configuration.</p>
<p>If no inspections are registered, the goal will succeed. If any registration&rsquo;s <code>onInspectionResult</code> returns &ldquo;fail&rdquo;, the goal will fail. If none return &ldquo;fail&rdquo; but one returns &ldquo;require approval&rdquo;, the goal will go to Waiting for Approval state until someone clicks the Approve button in Slack or on the Atomist web interface. </p>
<h3 id="autofix">Autofix</h3>
<p>This goal tells the SDM to check each push and create commits on top of it to correct fixable
violations in the code. For example, you can use this for automatic linting or to add license headers
where they have been omitted.</p>
<p>Instantiate the goal:</p>
<div class="codehilite"><pre><span></span><span class="kr">const</span> <span class="nx">autofixGoal</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Autofix</span><span class="p">().</span><span class="kd">with</span><span class="p">(</span><span class="nx">AddApacheLicenseFileAutofix</span><span class="p">);</span>
</pre></div>


<p>Add autofix registrations: see the <a href="../autofix/">autofix documentation</a>.</p>
<p>Then you add the goal to your goal set. For example, if you want to add the goal to each push:</p>
<div class="codehilite"><pre><span></span><span class="nx">sdm</span><span class="p">.</span><span class="nx">addPushRules</span><span class="p">(</span><span class="nx">onAnyPush</span><span class="p">().</span><span class="nx">setGoals</span><span class="p">(</span><span class="nx">autofix</span><span class="p">));</span>
</pre></div>


<p>Each autofix registration can include a <a href="../push-test/">push test</a> to select the projects it
can operate on.</p>
<h3 id="pushimpact">PushImpact</h3>
<p>This allows you to run an arbitrary function in response to a push, with information
about the changes in the push.</p>
<p>For example, the following function lists changed files to any
Slack channels linked to a repo:</p>
<div class="codehilite"><pre><span></span><span class="kr">export</span> <span class="kr">const</span> <span class="nx">listChangedFiles</span>: <span class="kt">PushImpactRegistration</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">action</span><span class="p">(</span><span class="nx">i</span>: <span class="kt">PushImpactListenerInvocation</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">i</span><span class="p">.</span><span class="nx">addressChannels</span><span class="p">(</span><span class="sb">`Files changed:</span><span class="err">\</span><span class="sb">n</span><span class="si">${</span><span class="nx">i</span><span class="p">.</span><span class="nx">filesChanged</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">n</span> <span class="o">=&gt;</span> <span class="s2">&quot;- `&quot;</span> <span class="o">+</span> <span class="nx">n</span> <span class="o">+</span> <span class="s2">&quot;`&quot;</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;\n&quot;</span><span class="p">)</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;List files changed&quot;</span><span class="p">,</span>
<span class="p">};</span>
</pre></div>


<p>If you don&rsquo;t have a custom name or PushTest, you can use the following shorthand, supplying only the
<code>PushImpactListener</code> function:</p>
<div class="codehilite"><pre><span></span><span class="kr">export</span> <span class="kr">const</span> <span class="nx">listChangedFiles</span> <span class="o">=</span> <span class="nx">i</span> <span class="o">=&gt;</span> <span class="nx">i</span><span class="p">.</span><span class="nx">addressChannels</span><span class="p">(</span><span class="sb">`Files changed:</span><span class="err">\</span><span class="sb">n</span><span class="si">${</span><span class="nx">i</span><span class="p">.</span><span class="nx">filesChanged</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">n</span> <span class="o">=&gt;</span> <span class="s2">&quot;- `&quot;</span> <span class="o">+</span> <span class="nx">n</span> <span class="o">+</span> <span class="s2">&quot;`&quot;</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;\n&quot;</span><span class="p">)</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</pre></div>


<p>Create a<code>PushImpact</code> goal and add listeners as follows:</p>
<div class="codehilite"><pre><span></span><span class="kr">const</span> <span class="nx">pushImpactGoal</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PushImpact</span><span class="p">().</span><span class="kd">with</span><span class="p">(</span><span class="nx">listChangedFiles</span><span class="p">)</span>
</pre></div>


<blockquote>
<p>If your reaction is essentially a review&ndash;for example, it&rsquo;s associated
with a known problem in a particular file location&ndash;use a
<code>CodeInspectionRegistration</code> rather than a <code>PushImpactRegistration</code>.</p>
</blockquote>
<h3 id="build">Build</h3>
<p>This one has its <a href="../build/">own section</a>.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../sdm-debug/" title="Debugging an SDM" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Debugging an SDM
              </span>
            </div>
          </a>
        
        
          <a href="../set-goals/" title="Setting Goals" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Setting Goals
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            &copy; 2018 Atomist, Inc.
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
<div class="md-footer-social">
  <link rel="stylesheet" href="../../assets/fonts/fix-mime-type-font-awesome.css">
  
  <a href="https://the-composition.com/" class="md-footer-social__link fa fa-medium"></a>
  
  <a href="https://github.com/atomist" class="md-footer-social__link fa fa-github"></a>
  
  <a href="https://twitter.com/atomist" class="md-footer-social__link fa fa-twitter"></a>
  
  <a href="https://join.atomist.com/" class="md-footer-social__link fa fa-slack"></a>
  
</div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.583bbe55.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
        <script src="../../js/intercom.js"></script>
      
        <script src="../../js/mixpanel.js"></script>
      
    
    
      
    
  </body>
</html>